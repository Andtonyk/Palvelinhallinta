Huom! Kaikki testit on toteuttu seuraavanlaisella koneella: Windows 10 OS:llä, Google Chrome selaimella ja koneena on toiminut Legion 5 kannettava. 16Gt RAM, AMD Ryzen 7 5800H, NVIDIA Geforce 3070 ja 200GB vapaata levytilaa SSD-levyasemalla.

# H2 - Kätyrin ja iso-pahan muodostaminen ja toivottavasti hallinta

## xa) Two Machine Virtual Network With Debian 11 Bullseye and Vagrant - tiivistelmä
Alkuperäinen teksti: Karvinen, Tero 2021: Two Machine Virtual Network With Debian 11 Bullseye and Vagrant (https://terokarvinen.com/2021/two-machine-virtual-network-with-debian-11-bullseye-and-vagrant/)

## xb) Salt Stack Master and Slave on Ubuntu Linux - tiivistelmä
Alkuperäinen teksti: Karvinen, Tero 2018: Salt Quickstart – Salt Stack Master and Slave on Ubuntu Linux (https://terokarvinen.com/2018/salt-quickstart-salt-stack-master-and-slave-on-ubuntu-linux/?fromSearch=salt%20quickstart%20salt%20stack%20master%20and%20slave%20on%20ubuntu%20linux)

## xc) Hello Salt Infra-as-Code - tiivistelmä
Alkuperäinen teksti: Karvinen, Tero 2024: Hello Salt Infra-as-Code (https://terokarvinen.com/2024/hello-salt-infra-as-code/)


## H2- A-Osuus
Muodostin alkuun uuden kansion, johon tuotin tehtävän aikana muodostuneen ohjelmistollisen sisällön

![Kansiopolku twohostiin](https://github.com/Andtonyk/h1---Debian/assets/149326156/712cec7f-f3e8-4e1d-8320-ebb3d6556f34)

Kun kansio oli muodostettuna siirryin PowerShelliin admin-oikeuksilla ja asetin 'Set-Location' komennolla PowerShellin polun vastaamaan uutta muodostettua kansiorakennetta. 
Sitten ajoin komennon 'vagrant init debian/bullseye64' kun uusi Vagrantfile oli onnistuneesti muodostuneena ja olin tehnyt aineistossa "Two Machine Virtual Network With Debian 11 Bullseye and Vagrant - https://terokarvinen.com/2021/two-machine-virtual-network-with-debian-11-bullseye-and-vagrant/" ilmoitetut muutokset sen sisältöön,  ajoin komennon 'vagrant up'.

Alla kuva Vagrantfileen lisätystä osiosta

![t001 sekä t002 ip-osoitteet](https://github.com/Andtonyk/h1---Debian/assets/149326156/f7ce1634-28a4-413a-887c-b5652b9bc359)

Vagrant muodosti onnistuneesti kaksi käyttäjää t001:den sekä t002:den, kuten VM:stä kävi ilmi.

![t001 ja t002 vmllä](https://github.com/Andtonyk/h1---Debian/assets/149326156/f016d767-dfba-499d-a60c-e5b17e28c06d)

Kun PowerShell oli suorittanut asennuksensa loppuun, kokeilin sen sisällä komennolla 'vagrant ssh t001' sekä 'vagrant ssh t002' että muodostettuja koneita pääsee käsittelemään.

![t001 sekä t002 powershell ssh tilatarkistus ennen etenemistä](https://github.com/Andtonyk/h1---Debian/assets/149326156/8f8e5e02-941d-4eb2-8718-01e6ce1a238e)

Tämän jälkeen etenin testaamaan pingauksen ja sen tulokset.

t001 pingasi onnistuneesti t002:sta osoitteesta 192.168.88.102. Komentona: ping -c 1 192.168.88.102

![t001 pingaukset](https://github.com/Andtonyk/h1---Debian/assets/149326156/025ab38b-cf06-49e3-8fda-29192e65c20c)

t002 pingasi onnistuneesti t001:stä osoitteesta 192.168.88.101. Komentona: ping -c 1 192.168.88.101

![t002 pingaukset](https://github.com/Andtonyk/h1---Debian/assets/149326156/41722ec2-20d2-4e18-a17b-80145389d2c4)

## H2 - B-Osuus

Tässä osiossa kohtasin ylittämättömäksi muodostuvia ongelmia. Sillä vaikka onnistuin muodostamaan koneet sekä niiden ssh-yhteyden ja pingauksen onnistuneesti, epäonnistuin pääasiallisessa tehtävässä, eli Master-Slave välin muodostuksessa.

Etenin ohjeistuksen 'Salt Quickstart – Salt Stack Master and Slave on Ubuntu Linux - https://terokarvinen.com/2018/salt-quickstart-salt-stack-master-and-slave-on-ubuntu-linux/' mukaisesti, eli aloitin ensimmäiseksi t001:stä muodostuksen master-tyyppiseksi.

Tämän toteutin syöttämällä komennot 'sudo apt-get update' ja 'sudo apt-get install salt-master'.

![t001 salt-master asennus](https://github.com/Andtonyk/h1---Debian/assets/149326156/468bef92-08ac-437a-ac14-cdae94ccfab5)

Onnistuneen asennuksen jälkeen otin ylös t001:den tiedot hostname -I komennolla.

![t001 hostname](https://github.com/Andtonyk/h1---Debian/assets/149326156/b8113a79-543a-42bc-a26d-f386c09eb567)

Tein t002 koneella ohjeistuksen 'Salt Quickstart – Salt Stack Master and Slave on Ubuntu Linux - https://terokarvinen.com/2018/salt-quickstart-salt-stack-master-and-slave-on-ubuntu-linux/' mukaisia komentoja, yrittäessäni saattaa t002:sta alisteiseksi. 

Toteutin komennot sudo apt-get update, sudo apt-get install salt-minion ja vastasin y, jonka jälkeen etenin muokkaamaan master tunnistetta komennolla: sudoedit /etc/salt/minion.

![t002 salt-minion asennus](https://github.com/Andtonyk/h1---Debian/assets/149326156/caecc229-4f7c-4d0e-bd02-927f83850bed)

Tämä on erittäin potentiaalinen ongelmakohta. Sillä yritin alla olevilla vaihtoehdoilla saada kyseistä t002:sta muodostumaan alisteiseksi. 
Ajoin jokaisen uuden master-muokkauksen jälkeen komennon: sudo systemctl restart salt-minion.service

![t002 master id](https://github.com/Andtonyk/h1---Debian/assets/149326156/dfaf8aab-dd12-4299-a987-5102b35baca2)
![t002 aktiivinen master-tunniste](https://github.com/Andtonyk/h1---Debian/assets/149326156/1af721d4-29a3-4908-a47c-a993f8f64177)
![t002 master ip-polku](https://github.com/Andtonyk/h1---Debian/assets/149326156/ad67e84f-d93b-4335-b91d-a7bb8cec7508)

Yritin myös epätoivossa yhdistyksellistä komentoa

![t002 master-tunnisteen syöttö](https://github.com/Andtonyk/h1---Debian/assets/149326156/8737e0c6-ec4b-4251-b9a3-3546c7e6511e)

Kaikki testit päättyivät samaan lopputulemaan t001:llä, kun toivottavasti odottavia kutsuja yritti hyväksyä komennolla: sudo salt-key -A

![t001 key glob unmatch, 10 0 2 15, 192 168 88 101 tai yhdessä](https://github.com/Andtonyk/h1---Debian/assets/149326156/e134536e-b0e6-4e74-a557-cebd615c978c)

Mahdollisia ongelman aiheuttajia: hostname vastaamattomuus, virhe t001:den ja t002:den asennuksessa tai väärä toteutus ssh:ssa. 
