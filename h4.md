Huom! Kaikki testit on toteuttu seuraavanlaisella koneella: Windows 10 OS:llä, Google Chrome selaimella ja koneena on toiminut Legion 5 kannettava. 16Gt RAM, AMD Ryzen 7 5800H, NVIDIA Geforce 3070 ja 200GB vapaata levytilaa SSD-levyasemalla.

# H4 - Hierarkiat toimivat, jos on osaava käskyttäjä

## xa) Salt Vagrant - automatically provision one master and two slaves - tiivistelmä
Alkuperäinen teksti: Tero Karvinen, 2023: Salt Vagrant - automatically provision one master and two slaves ([https://git-scm.com/book/en/v2/Getting-Started-What-is-Git%3F](https://terokarvinen.com/2024/configuration-management-2024-spring/#h3-toimiva-versio))

Tekstin tarkasteltavissa osioissa on ohjeistettuna kätyri-koneiden ohjelmien ajamisen mahdollistavan komentopromptin ja sen sisällön muodostuksen perustat.

$ sudo mkdir -p /srv/salt/hello -> Komennolla muodostetaan kansio, joka on tässä esimerkissä nimetty "hello"
$ sudoedit /srv/salt/hello/init.sls -> Muodostetaan juuri tehtyyn kansioon initialize-komennollinen tiedosto. Alla olevassa osiossa on ilmoitettuna esimerkkiin tulevan init.sls tiedoston sisältö.

Huom! file.managed on sisennetty välilyönneillä, ei tabilla

$ cat /srv/salt/hello/init.sls
/tmp/infra-as-code:
  file.managed

Huom! file.managed on sisennetty välilyönneillä, ei tabilla

$ sudo salt '*' state.apply hello -> Ohjaa muodostamaan tehdyn hello-kansion sisällön, eli ajamaan sen.

Tämän jälkeen käsiteltävässä aineistossa käydään läpi ajon kohdentamisen huomio. Materiaalissa muodostetaan .sls sanoma, joka koskee kaikkia kätyreitä.

$ sudo salt '*' state.apply hello^C
$ sudoedit /srv/salt/top.sls
$ cat /srv/salt/top.sls
base:
  '*':
    - hello

Tämän jälkeen kaikki kätyrit voivat ajaa saman muodostetun init.sls:n ilman erillistä, kätyriin liittyvää, kohdennusta.

$ sudo salt '*' state.apply


## xb) Salt-perusteita: YAML - tiivistelmä
Alkuperäinen teksti: VMware INC, 2024: Salt overview (https://docs.saltproject.io/salt/user-guide/en/latest/topics/overview.html#rules-of-yaml)

### Mikä on YAML?
YAML:illa tarkoitetaan Saltin oletuksellista renderöijää. Se on markup-kieli, jonka tehtävänä on muuttaa omasta YAML-datastruktuurista vastaava versio pythoniksi Saltille.

YAML koostuu kolmesta peruselementistä: Scalareista, listoista ja sanakirjoista.

Scalareilla tarkoitetaan "avain: arvo" rakenteisiin syötettyä arvoa, joka on numero, jana tai tosi-epätosi-arvo (koodillisella merkityksellä YAML:issa näillä tarkoitettaisiin number-, string- ja boolean-kenttiä).

kasviksia: pavut
hedelmiä: omenat
viljasta: leipää

Listoilla tarkoitetaan listattuja arvoja "avain:" kentän jälkeen, jossa jokainen listattava arvoksi katsottu kohta on omalla rivillään ja sisennetty kahdella välilyönnillä ja niiden jälkeen tulevalla viivalla.

kasviksia:
   - papuja
   - porkkanoita
hedelmiä:
   - omenoita
   - appelsiineja

Sanakirjoilla tarkoitetaan kokoelmia valmiiksi muodostetuista "avain: arvo" kentistä sekä listoista.

päivällinen:
  alkupalat: katkarapu-koktaili
  juoma: kivennäisvettä
  entree:
    - pihvi
    - perunamuusia
    - vihreitä vihanneksia
  jälkiruoka:
    - suklaakakku

- YAML:issa data on rakennettu parillisista arvoista muodossa (avain: arvo).
- Parit muodostetaan syöttämällä (": ", eli kaksoispiste ja välilyönti) avaimen ja halutun arvon väliin. Esimerkkinä ei toimiva koodi, jolla avataan merkkien sijaintia. init: on_startup
- Avaimet voivat olla monessa eri kohdassa rakenteita.
- Kaikki avaimet ja ominaisuudet ovat tapauskohtaisia (case-sensitive).
- Tabi on kielletty jakava-komento, käytä pelkkää välilyöntiä
- Kommenttien alussa on risuaita/häshtägi (#)


## xc) 
Alkuperäinen teksti: Tero Karvinen, Pkg-File-Service – Control Daemons with Salt – Change SSH Server Port (https://terokarvinen.com/2018/04/03/pkg-file-service-control-daemons-with-salt-change-ssh-server-port/?fromSearch=karvinen%20salt%20ssh)



## xd)
